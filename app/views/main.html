<script>$('#nav-master').css('display','block');</script>

<div ng-hide="signedIn()" id="peek">
  <!-- Placeholder for if a user tries to look at /main while logged out -->
</div>

<div ng-show="signedIn()" class="main-body-background">
  <div class="container-fluid content-section">

    <!-- Button link for new post -->
    <div class="row text-center">
      <div class="col-md-6 col-md-offset-3 background-white new-post-button-section">
        <button type="button" class="btn btn-primary btn-lg btn-block" data-toggle="modal" data-target="#newPostModal">New Post</button> 
      </div>
    </div>
      
    <!-- New Post Modal --> 
    <div class="modal fade" id="newPostModal" tabindex="-1" role="dialog" aria-labelledby="newPostModalLabel" aria-hidden="true"> 
      <div class="modal-dialog"> 
        <form ng-controller="PostsCtrl" class="modal-content" ng-submit="submitPost()" ng-show="signedIn()"> 
          <div class="modal-header"> 
            <button type="button" class="close" data-dismiss="modal"><spanaria-hidden="true">Ã—</span><spanclass="sr-only"></span></button> 
            <h4 class="modal-title" id="newPostModalLabel">New Post</h4> 
          </div> 
          <div class="modal-body">
            <div class="row">
              <div class="col-xs-8">
                <input type="text" class="form-control" placeholder="Title" ng-model="post.title">
              </div>
              <div class="col-xs-4">
                <select id="post-label" class="form-control"> 
                  <option selected disabled>Label</option>
                  <option>Projects</option>
                  <option>Tutorials</option> 
                  <option>Fun</option> 
                  <option>Misc</option> 
                </select>
              </div>
            </div> 
            <textarea class="form-control" rows="3" placeholder="Post" ng-model="post.content"></textarea> 
          </div> 
          <div class="modal-footer"> 
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button> 
            <button type="submit" class="btn btn-primary">Post</button> 
          </div> 
        </form> 
      </div> 
    </div>
    <!-- New Post Modal End -->

    <!-- FULL POST TEMPLATE (3 SECTIONS: POST,REPLIES,NEW-REPLY) -->
    <div class="post-template" ng-repeat="post in reverse(posts)">
      <!-- Template for post -->
      <div class="row">
        <div class="col-md-6 col-md-offset-3 background-white post-main">
          <img src="images/user.jpg">
          <ul class="list-group">
            <li class="list-group-item"><a id="create-reply"><i class="fa fa-reply"></i></a></li>
            <li class="list-group-item"><a id="show-reply"><span class="badge">2</span></a></li>
          </ul>
          <h5><span id="post-title">{{ post.title }}</span><span id="timestamp"> <span id="username">{{ post.creator }}</span> - <span id="date-time">{{ post.postTime }}</span> - <span id="keyword">{{ post.keyword }}</span></span></h5>
          <p>{{ post.content }}</p>
        </div>
      </div>

      <!-- Reply sample -->
      <div class="replies hidden wrapped-up">
        <div class="row">
          <div class="col-md-6 col-md-offset-3 post-main-reply">
            <img src="images/user-2.jpg">
            <h5><span>{{ post.creator }}</span> - <span>{{ post.postTime }}</span></h5>
            <p>{{ post.content }}</p>
          </div>
        </div>
      </div>

      <!-- Template for new reply -->
      <div class="post-reply hidden wrapped-up row text-center">
        <div class="col-md-6 col-md-offset-3 post-reply-section">
          <textarea class="form-control" rows="3" placeholder="Post"></textarea>
          <div class="row">
            <div class="col-xs-4 col-xs-offset-4">
              <button type="button" id="cancel-reply" class="btn btn-default btn-lg btn-block">Cancel</button> 
            </div>
            <div class="col-xs-4">
              <button type="button" class="btn btn-primary btn-lg btn-block">Reply</button> 
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- FULL POST TEMPLATE END -->

    <!-- Button link for more posts -->
    <div class="row text-center">
      <div class="col-md-6 col-md-offset-3 background-white more-post-button-section">
        <button type="button" class="btn btn-default btn-lg btn-block">More Posts</button> 
      </div>
    </div>
  <!-- End Main Content container -->
  </div>
</div> 
